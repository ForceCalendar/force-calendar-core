<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lightning Calendar Core - Interactive Console</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="demo.css">
    <style>
        /* Homepage specific adjustments */
        .hero-section {
            padding: var(--spacing-xl) 0;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 var(--spacing-lg);
            text-align: center;
        }

        .hero-content h1 {
            font-size: 2rem;
            font-weight: 300;
            margin-bottom: var(--spacing-md);
        }

        .hero-content p {
            color: var(--text-secondary);
            margin-bottom: var(--spacing-lg);
        }

        .quick-links {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            margin-bottom: var(--spacing-lg);
        }

        .quick-links a {
            padding: var(--spacing-xs) var(--spacing-md);
            border: 1px solid var(--border-color);
            font-size: 0.875rem;
        }

        .quick-links a:hover {
            background: var(--bg-primary);
            text-decoration: none;
        }

        /* Make console the primary focus */
        .console {
            background: #1a1a1a;
            border-bottom: none;
            padding: var(--spacing-xl) 0;
        }

        .console-container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 var(--spacing-lg);
        }

        .console-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .console-title {
            color: #d4d4d4;
            font-size: 0.875rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .console-status {
            color: #4ec9b0;
            font-size: 0.75rem;
            font-family: var(--font-mono);
        }

        .console-output {
            height: 300px;
            background: #000;
            padding: var(--spacing-md);
            overflow-y: auto;
            font-family: var(--font-mono);
            font-size: 0.875rem;
            border: 1px solid #333;
            margin-bottom: var(--spacing-md);
        }

        .console-controls {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .console-input-wrapper {
            position: relative;
        }

        .console-input {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md);
            background: #000;
            border: 1px solid #333;
            color: #d4d4d4;
            font-family: var(--font-mono);
            font-size: 0.875rem;
        }

        .console-input:focus {
            outline: none;
            border-color: #555;
        }

        .console-run {
            padding: var(--spacing-sm) var(--spacing-lg);
            background: #333;
            border: 1px solid #333;
            color: #d4d4d4;
            cursor: pointer;
            font-size: 0.875rem;
        }

        .console-run:hover {
            background: #444;
        }

        /* Quick commands */
        .quick-commands {
            margin-bottom: var(--spacing-lg);
        }

        .quick-commands-title {
            color: #999;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--spacing-sm);
        }

        .command-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-xs);
        }

        .command-btn {
            padding: var(--spacing-xs) var(--spacing-sm);
            background: #222;
            border: 1px solid #333;
            color: #d4d4d4;
            font-size: 0.75rem;
            font-family: var(--font-mono);
            cursor: pointer;
            transition: all 0.2s;
        }

        .command-btn:hover {
            background: #333;
            color: #fff;
        }

        .command-btn.category-query { border-left: 2px solid #569cd6; }
        .command-btn.category-modify { border-left: 2px solid #4ec9b0; }
        .command-btn.category-info { border-left: 2px solid #dcdcaa; }

        /* Calendar preview */
        .demo-grid {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .calendar-preview {
            border: 1px solid var(--border-color);
            padding: var(--spacing-lg);
            background: var(--bg-primary);
        }

        .sidebar {
            space-y: var(--spacing-lg);
        }

        .sidebar-section {
            padding: var(--spacing-md);
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            margin-bottom: var(--spacing-md);
        }

        .sidebar-section h3 {
            font-size: 0.875rem;
            margin-bottom: var(--spacing-sm);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-sm);
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 300;
            display: block;
        }

        .stat-label {
            font-size: 0.625rem;
            text-transform: uppercase;
            color: var(--text-muted);
        }

        @media (max-width: 1024px) {
            .demo-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Lightning Calendar Core</h1>
            <nav>
                <a href="https://github.com/thedhanawada/lightning-calendar-core">GitHub</a>
                <a href="https://github.com/thedhanawada/lightning-calendar-core/wiki">Docs</a>
                <a href="demo.html">Full Demo</a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <h1>Interactive JavaScript Calendar Engine</h1>
            <p>Zero dependencies. Built for Salesforce. Try it live in the console below.</p>
            <div class="quick-links">
                <a href="#console">Try Console</a>
                <a href="https://github.com/thedhanawada/lightning-calendar-core#installation">Installation</a>
                <a href="about.html">About</a>
            </div>
        </div>
    </section>

    <!-- Live Calendar Preview -->
    <section class="container" style="padding: var(--spacing-xl) var(--spacing-lg);">
        <div class="demo-grid">
            <div class="calendar-preview">
                <div class="control-group" style="margin-bottom: var(--spacing-md);">
                    <div class="button-group" style="display: flex; gap: var(--spacing-xs);">
                        <button data-view="month" class="active">Month</button>
                        <button data-view="week">Week</button>
                        <button data-view="day">Day</button>
                        <button data-view="list">List</button>
                    </div>
                </div>
                <div id="calendar-display">
                    <!-- Calendar renders here -->
                </div>
            </div>

            <div class="sidebar">
                <div class="sidebar-section">
                    <h3>Quick Add Event</h3>
                    <form id="quick-add">
                        <input type="text" id="title" placeholder="Event title" style="width: 100%; margin-bottom: 8px; padding: 4px;">
                        <input type="datetime-local" id="start" style="width: 100%; margin-bottom: 8px; padding: 4px;">
                        <button type="submit" style="width: 100%; padding: 6px; background: #333; color: white; border: none; cursor: pointer;">Add Event</button>
                    </form>
                </div>

                <div class="sidebar-section">
                    <h3>Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat">
                            <span class="stat-value" id="total-events">0</span>
                            <span class="stat-label">Events</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="views-count">4</span>
                            <span class="stat-label">Views</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="cache-hits">0</span>
                            <span class="stat-label">Cache Hits</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="undo-count">0</span>
                            <span class="stat-label">Undos</span>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3>Actions</h3>
                    <button id="detect-conflicts" style="width: 100%; padding: 6px; margin-bottom: 4px;">Detect Conflicts</button>
                    <button id="clear-all" style="width: 100%; padding: 6px;">Clear All Events</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Console -->
    <section id="console" class="console">
        <div class="console-container">
            <div class="console-header">
                <span class="console-title">Interactive Console</span>
                <span class="console-status">● Connected to Calendar Engine</span>
            </div>

            <div class="console-output" id="console-output">
                <div style="color: #569cd6;">// Lightning Calendar Core Console v1.0</div>
                <div style="color: #608b4e;">// All core objects are available globally: calendar, Event, EventStore</div>
            </div>

            <div class="quick-commands">
                <div class="quick-commands-title">Quick Commands - Click to Execute</div>

                <!-- Basic Operations -->
                <div style="margin-bottom: var(--spacing-md);">
                    <div style="color: #999; font-size: 0.625rem; margin-bottom: 4px;">BASIC OPERATIONS</div>
                    <div class="command-buttons">
                        <button class="command-btn category-query" data-command="calendar.getEvents()" title="Get all events in the calendar">
                            Get All Events
                        </button>
                        <button class="command-btn category-query" data-command="calendar.getEventsForDate(new Date())" title="Get today's events">
                            Today's Events
                        </button>
                        <button class="command-btn category-modify" data-command='calendar.addEvent(new Event({ id: "demo-" + Date.now(), title: "Sample Meeting", start: new Date(Date.now() + 3600000), end: new Date(Date.now() + 7200000) }))' title="Add a sample event">
                            Add Event
                        </button>
                        <button class="command-btn category-modify" data-command="calendar.clearEvents()" title="Remove all events">
                            Clear All
                        </button>
                    </div>
                </div>

                <!-- View Controls -->
                <div style="margin-bottom: var(--spacing-md);">
                    <div style="color: #999; font-size: 0.625rem; margin-bottom: 4px;">VIEW CONTROLS</div>
                    <div class="command-buttons">
                        <button class="command-btn category-modify" data-command="calendar.setView('month')" title="Switch to month view">
                            Month View
                        </button>
                        <button class="command-btn category-modify" data-command="calendar.setView('week')" title="Switch to week view">
                            Week View
                        </button>
                        <button class="command-btn category-modify" data-command="calendar.setView('day')" title="Switch to day view">
                            Day View
                        </button>
                        <button class="command-btn category-modify" data-command="calendar.setView('list')" title="Switch to list view">
                            List View
                        </button>
                        <button class="command-btn category-modify" data-command="calendar.today()" title="Navigate to today">
                            Go to Today
                        </button>
                        <button class="command-btn category-modify" data-command="calendar.nextPeriod()" title="Go to next period">
                            Next →
                        </button>
                        <button class="command-btn category-modify" data-command="calendar.previousPeriod()" title="Go to previous period">
                            ← Previous
                        </button>
                    </div>
                </div>

                <!-- Advanced Features -->
                <div style="margin-bottom: var(--spacing-md);">
                    <div style="color: #999; font-size: 0.625rem; margin-bottom: 4px;">ADVANCED FEATURES</div>
                    <div class="command-buttons">
                        <button class="command-btn category-info" data-command="calendar.eventStore.conflictDetector.findAllConflicts()" title="Find scheduling conflicts">
                            Find Conflicts
                        </button>
                        <button class="command-btn category-modify" data-command="calendar.state.undo()" title="Undo last change">
                            Undo
                        </button>
                        <button class="command-btn category-modify" data-command="calendar.state.redo()" title="Redo last undone change">
                            Redo
                        </button>
                        <button class="command-btn category-info" data-command="calendar.eventStore.getPerformanceMetrics()" title="Get performance statistics">
                            Performance
                        </button>
                        <button class="command-btn category-query" data-command="calendar.eventStore.getStats()" title="Get event statistics">
                            Stats
                        </button>
                        <button class="command-btn category-info" data-command="calendar.state.canUndo()" title="Check if undo is available">
                            Can Undo?
                        </button>
                    </div>
                </div>

                <!-- Example Commands -->
                <div style="margin-bottom: var(--spacing-md);">
                    <div style="color: #999; font-size: 0.625rem; margin-bottom: 4px;">EXAMPLE COMMANDS</div>
                    <div class="command-buttons">
                        <button class="command-btn category-modify" data-command='calendar.eventStore.addEvents([
    new Event({ id: "1", title: "Team Standup", start: new Date(), end: new Date(Date.now() + 1800000), recurrence: { frequency: "DAILY" } }),
    new Event({ id: "2", title: "Sprint Review", start: new Date(Date.now() + 86400000), end: new Date(Date.now() + 90000000) })
])' title="Add multiple events with recurrence">
                            Add Recurring Events
                        </button>
                        <button class="command-btn category-query" data-command='calendar.getEventsInRange(new Date(), new Date(Date.now() + 7 * 86400000))' title="Get events for next 7 days">
                            Next 7 Days
                        </button>
                        <button class="command-btn category-info" data-command="Object.getOwnPropertyNames(calendar).filter(p => typeof calendar[p] === 'function').slice(0, 10)" title="List available calendar methods">
                            Show Methods
                        </button>
                        <button class="command-btn category-query" data-command='calendar.eventStore.searchEvents("meeting")' title="Search events by keyword">
                            Search "meeting"
                        </button>
                    </div>
                </div>

                <!-- Keyboard Shortcuts -->
                <div style="color: #666; font-size: 0.625rem; margin-top: var(--spacing-sm);">
                    <span style="margin-right: 12px;">↑↓ Command History</span>
                    <span style="margin-right: 12px;">Enter Run Command</span>
                    <span>Click any button to execute</span>
                </div>
            </div>

            <div class="console-controls">
                <div class="console-input-wrapper">
                    <input type="text"
                           id="console-input"
                           class="console-input"
                           placeholder="Type JavaScript code here... (e.g., calendar.getEvents())"
                           autocomplete="off">
                </div>
                <button id="console-run" class="console-run">Run</button>
            </div>
        </div>
    </section>

    <!-- Minimal footer -->
    <footer style="padding: var(--spacing-xl) 0; text-align: center; color: var(--text-muted); font-size: 0.875rem;">
        <p>
            MIT License ·
            <a href="https://github.com/thedhanawada/lightning-calendar-core">GitHub</a> ·
            <a href="https://github.com/thedhanawada/lightning-calendar-core/issues">Issues</a> ·
            Built for Salesforce Developers
        </p>
    </footer>

    <!-- Load the real engine -->
    <script type="module">
        import { Calendar, Event, EventStore } from './dist/calendar-core.esm.js';

        // Make available globally for console
        window.Calendar = Calendar;
        window.Event = Event;
        window.EventStore = EventStore;

        // Initialize calendar
        const calendar = new Calendar({
            view: 'month',
            timeZone: 'America/New_York'
        });
        window.calendar = calendar;

        // Console functionality
        class ConsoleInterface {
            constructor() {
                this.output = document.getElementById('console-output');
                this.input = document.getElementById('console-input');
                this.commandHistory = [];
                this.historyIndex = -1;

                this.init();
            }

            init() {
                // Run button
                document.getElementById('console-run').addEventListener('click', () => {
                    this.execute(this.input.value);
                });

                // Enter key
                this.input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.execute(this.input.value);
                    }
                });

                // Arrow keys for history
                this.input.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowUp') {
                        e.preventDefault();
                        this.navigateHistory(-1);
                    } else if (e.key === 'ArrowDown') {
                        e.preventDefault();
                        this.navigateHistory(1);
                    }
                });

                // Quick command buttons
                document.querySelectorAll('.command-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const command = btn.dataset.command;
                        this.input.value = command;
                        this.execute(command);
                    });
                });

                // Initial welcome messages
                setTimeout(() => {
                    this.log('Calendar engine initialized successfully', 'success');
                    this.log('Try clicking the quick commands above or type your own JavaScript', 'info');
                    this.log('Example: calendar.addEvent(new Event({title: "My Event", start: new Date()}))', 'info');
                }, 100);
            }

            execute(command) {
                if (!command.trim()) return;

                this.log(`> ${command}`, 'command');
                this.commandHistory.push(command);
                this.historyIndex = this.commandHistory.length;

                try {
                    const result = eval(command);

                    if (result !== undefined) {
                        if (typeof result === 'object') {
                            this.log(JSON.stringify(result, null, 2), 'result');
                        } else {
                            this.log(String(result), 'result');
                        }
                    }

                    // Update UI if calendar was modified
                    if (command.includes('add') || command.includes('remove') || command.includes('clear') ||
                        command.includes('setView') || command.includes('next') || command.includes('previous') ||
                        command.includes('today')) {
                        updateCalendarDisplay();
                        updateStats();
                    }
                } catch (error) {
                    this.log(`Error: ${error.message}`, 'error');
                }

                this.input.value = '';
                this.input.focus();
            }

            navigateHistory(direction) {
                if (direction === -1 && this.historyIndex > 0) {
                    this.historyIndex--;
                    this.input.value = this.commandHistory[this.historyIndex];
                } else if (direction === 1 && this.historyIndex < this.commandHistory.length - 1) {
                    this.historyIndex++;
                    this.input.value = this.commandHistory[this.historyIndex];
                } else if (direction === 1 && this.historyIndex === this.commandHistory.length - 1) {
                    this.historyIndex = this.commandHistory.length;
                    this.input.value = '';
                }
            }

            log(message, type = 'info') {
                const entry = document.createElement('div');
                entry.style.marginBottom = '4px';
                entry.style.lineHeight = '1.4';

                // Format based on type
                switch(type) {
                    case 'command':
                        entry.style.color = '#569cd6';
                        entry.style.fontWeight = '500';
                        break;
                    case 'result':
                        entry.style.color = '#4ec9b0';
                        // Pretty-print objects and arrays
                        if (message.startsWith('[') || message.startsWith('{')) {
                            entry.style.whiteSpace = 'pre-wrap';
                            entry.style.fontSize = '0.8rem';
                        }
                        break;
                    case 'error':
                        entry.style.color = '#f48771';
                        entry.innerHTML = '✕ ' + this.escapeHtml(message);
                        break;
                    case 'success':
                        entry.style.color = '#4ec9b0';
                        entry.innerHTML = '✓ ' + this.escapeHtml(message);
                        break;
                    case 'info':
                        entry.style.color = '#dcdcaa';
                        entry.style.fontStyle = 'italic';
                        break;
                    default:
                        entry.style.color = '#d4d4d4';
                }

                if (type !== 'error' && type !== 'success') {
                    entry.textContent = message;
                }

                this.output.appendChild(entry);
                this.output.scrollTop = this.output.scrollHeight;
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }

        // Calendar display
        function updateCalendarDisplay() {
            const viewData = calendar.getViewData();
            const container = document.getElementById('calendar-display');

            if (!viewData) {
                container.innerHTML = '<p>No data</p>';
                return;
            }

            switch(calendar.getView()) {
                case 'month':
                    renderMonth(container, viewData);
                    break;
                case 'week':
                    renderWeek(container, viewData);
                    break;
                case 'day':
                    renderDay(container, viewData);
                    break;
                case 'list':
                    renderList(container, viewData);
                    break;
            }
        }

        function renderMonth(container, viewData) {
            let html = '<div class="month-view" style="font-size: 0.75rem;">';
            html += '<div class="weekdays" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; margin-bottom: 4px;">';
            ['S', 'M', 'T', 'W', 'T', 'F', 'S'].forEach(day => {
                html += `<div style="text-align: center; padding: 4px; color: #666;">${day}</div>`;
            });
            html += '</div>';
            html += '<div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px;">';

            viewData.weeks.forEach(week => {
                week.days.forEach(day => {
                    const bgColor = day.isToday ? '#fef5e7' : day.isCurrentMonth ? '#fff' : '#f8f8f8';
                    const eventCount = day.events ? day.events.length : 0;
                    html += `<div style="min-height: 40px; padding: 2px 4px; background: ${bgColor}; border: 1px solid #e5e5e5; position: relative;">`;
                    html += `<div style="font-size: 0.75rem;">${day.dayOfMonth}</div>`;
                    if (eventCount > 0) {
                        html += `<div style="position: absolute; top: 2px; right: 2px; background: #0066cc; color: white; border-radius: 50%; width: 16px; height: 16px; font-size: 0.625rem; display: flex; align-items: center; justify-content: center;">${eventCount}</div>`;
                    }
                    html += '</div>';
                });
            });

            html += '</div></div>';
            container.innerHTML = html;
        }

        function renderWeek(container, viewData) {
            let html = '<div class="week-view" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; font-size: 0.75rem;">';
            viewData.days.forEach(day => {
                html += `<div style="padding: 8px; background: ${day.isToday ? '#fef5e7' : '#f8f8f8'};">`;
                html += `<div style="font-weight: 500; margin-bottom: 4px;">${day.dayName.slice(0, 3)}</div>`;
                if (day.events && day.events.length > 0) {
                    html += `<div style="color: #0066cc;">${day.events.length} events</div>`;
                }
                html += '</div>';
            });
            html += '</div>';
            container.innerHTML = html;
        }

        function renderDay(container, viewData) {
            let html = '<div class="day-view" style="font-size: 0.75rem; max-height: 300px; overflow-y: auto;">';
            for (let hour = 0; hour < 24; hour++) {
                const hourData = viewData.hours && viewData.hours[hour];
                const hasEvents = hourData && hourData.events && hourData.events.length > 0;
                if (hasEvents || (hour >= 8 && hour <= 18)) {
                    html += `<div style="display: grid; grid-template-columns: 50px 1fr; border-bottom: 1px solid #e5e5e5; min-height: 30px;">`;
                    html += `<div style="padding: 4px; color: #999; font-size: 0.625rem;">${hour}:00</div>`;
                    html += `<div style="padding: 4px;">`;
                    if (hasEvents) {
                        hourData.events.forEach(event => {
                            html += `<div style="background: #0066cc; color: white; padding: 2px 4px; margin-bottom: 2px; font-size: 0.625rem;">${event.title}</div>`;
                        });
                    }
                    html += '</div></div>';
                }
            }
            html += '</div>';
            container.innerHTML = html;
        }

        function renderList(container, viewData) {
            let html = '<div class="list-view" style="font-size: 0.75rem; max-height: 300px; overflow-y: auto;">';
            if (viewData.days && viewData.days.length > 0) {
                viewData.days.forEach(day => {
                    if (day.events && day.events.length > 0) {
                        html += `<div style="margin-bottom: 8px;">`;
                        html += `<div style="font-weight: 500; color: #666; margin-bottom: 4px;">${day.dayName}</div>`;
                        day.events.forEach(event => {
                            html += `<div style="padding: 4px; background: #f8f8f8; margin-bottom: 2px;">${event.title}</div>`;
                        });
                        html += '</div>';
                    }
                });
            } else {
                html += '<p style="color: #999;">No events</p>';
            }
            html += '</div>';
            container.innerHTML = html;
        }

        function updateStats() {
            const stats = calendar.eventStore.getStats();
            document.getElementById('total-events').textContent = stats.totalEvents;
            document.getElementById('undo-count').textContent = calendar.state.getUndoCount();

            const metrics = calendar.eventStore.getPerformanceMetrics();
            document.getElementById('cache-hits').textContent = metrics.cacheHits || 0;
        }

        // View switchers
        document.querySelectorAll('[data-view]').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('[data-view]').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                calendar.setView(e.target.dataset.view);
                updateCalendarDisplay();
            });
        });

        // Quick add form
        document.getElementById('quick-add').addEventListener('submit', (e) => {
            e.preventDefault();
            const title = document.getElementById('title').value;
            const start = new Date(document.getElementById('start').value);

            if (title && start) {
                const event = new Event({
                    id: `evt-${Date.now()}`,
                    title,
                    start,
                    end: new Date(start.getTime() + 3600000)
                });
                calendar.addEvent(event);
                updateCalendarDisplay();
                updateStats();
                e.target.reset();
                consoleInterface.log(`Event "${title}" added successfully`, 'success');
            }
        });

        // Action buttons
        document.getElementById('detect-conflicts').addEventListener('click', () => {
            const conflicts = calendar.eventStore.conflictDetector.findAllConflicts();
            consoleInterface.log(`Found ${conflicts.length} conflicts`, 'info');
            if (conflicts.length > 0) {
                consoleInterface.log(JSON.stringify(conflicts, null, 2), 'result');
            }
        });

        document.getElementById('clear-all').addEventListener('click', () => {
            if (confirm('Clear all events?')) {
                calendar.clearEvents();
                updateCalendarDisplay();
                updateStats();
                consoleInterface.log('All events cleared successfully', 'success');
            }
        });

        // Load sample data
        function loadSampleEvents() {
            const events = [
                new Event({
                    id: '1',
                    title: 'Team Meeting',
                    start: new Date(),
                    end: new Date(Date.now() + 3600000)
                }),
                new Event({
                    id: '2',
                    title: 'Project Review',
                    start: new Date(Date.now() + 86400000),
                    end: new Date(Date.now() + 86400000 + 7200000)
                }),
                new Event({
                    id: '3',
                    title: 'Conference',
                    start: new Date(Date.now() + 172800000),
                    end: new Date(Date.now() + 172800000 + 10800000),
                    allDay: false
                })
            ];

            calendar.eventStore.addEvents(events);
        }

        // Set default datetime
        const now = new Date();
        document.getElementById('start').value = now.toISOString().slice(0, 16);

        // Initialize
        const consoleInterface = new ConsoleInterface();
        loadSampleEvents();
        updateCalendarDisplay();
        updateStats();

        // Focus console on load
        document.getElementById('console-input').focus();
    </script>
</body>
</html>